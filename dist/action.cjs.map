{"version":3,"sources":["../src/action.ts","../src/program.ts","../src/commands/auto-label.ts","../src/lib/codex.ts","../src/lib/files.ts","../src/lib/logger.ts","../src/lib/context.ts","../src/lib/env.ts","../src/lib/github.ts","../src/commands/doc-sync.ts","../src/lib/doc-sync.ts","../src/lib/exec.ts","../src/lib/templates.ts","../src/lib/git.ts","../src/lib/go.ts","../src/commands/go-tests.ts","../src/commands/release.ts","../src/commands/review.ts"],"sourcesContent":["import * as core from '@actions/core';\nimport { createProgram } from './program';\nimport { logger } from './lib/logger';\n\nconst truthy = (value: string | undefined | null, defaultValue = false) => {\n  if (value === undefined || value === null || value === '') {\n    return defaultValue;\n  }\n  return ['true', '1', 'yes', 'on'].includes(value.toLowerCase());\n};\n\nconst pushOption = (args: string[], flag: string, value?: string) => {\n  if (value) {\n    args.push(flag, value);\n  }\n};\n\nconst pushBooleanFlag = (args: string[], flag: string, enabled?: boolean) => {\n  if (enabled) {\n    args.push(flag);\n  }\n};\n\nconst pushSharedCodexFlags = (args: string[]) => {\n  pushBooleanFlag(args, '--enable-network', truthy(core.getInput('network_access')));\n  pushBooleanFlag(args, '--enable-web-search', truthy(core.getInput('web_search')));\n};\n\nconst buildReviewArgs = () => {\n  const args: string[] = [];\n  pushOption(args, '--prompt', core.getInput('prompt_path') || 'prompts/codex-review.md');\n  pushOption(args, '--prompt-extra', core.getInput('prompt_extra'));\n  pushOption(args, '--model', core.getInput('model'));\n  pushOption(args, '--effort', core.getInput('effort'));\n  pushOption(args, '--codex-bin', core.getInput('codex_bin'));\n  pushOption(args, '--event-path', core.getInput('event_path'));\n  const pullNumber = core.getInput('pull_number');\n  if (pullNumber) {\n    args.push('--pull-number', pullNumber);\n  }\n  if (truthy(core.getInput('dry_run'))) {\n    args.push('--dry-run');\n  }\n  pushSharedCodexFlags(args);\n  return args;\n};\n\nconst buildGoTestArgs = () => {\n  const args: string[] = [];\n  pushOption(args, '--go-version', core.getInput('go_version'));\n  pushOption(args, '--go-version-file', core.getInput('go_version_file'));\n  pushOption(args, '--working-directory', core.getInput('working_directory'));\n  pushOption(args, '--test-flags', core.getInput('test_flags'));\n  pushOption(args, '--pre-test', core.getInput('pre_test'));\n  const envLines = core.getMultilineInput('env');\n  envLines.forEach((line) => {\n    if (line.trim()) {\n      args.push('--env', line.trim());\n    }\n  });\n  return args;\n};\n\nconst buildReleaseArgs = () => {\n  const args: string[] = [];\n  pushOption(args, '--tag-name', core.getInput('tag_name', { required: true }));\n  pushOption(args, '--release-title', core.getInput('release_title'));\n  pushOption(args, '--target', core.getInput('target') || 'main');\n  pushBooleanFlag(args, '--draft', truthy(core.getInput('draft')));\n  pushBooleanFlag(args, '--skip-tests', truthy(core.getInput('skip_tests')));\n  pushOption(args, '--go-version', core.getInput('go_version'));\n  pushOption(args, '--go-version-file', core.getInput('go_version_file'));\n  pushOption(args, '--test-flags', core.getInput('test_flags'));\n  pushOption(args, '--pre-test', core.getInput('pre_test'));\n  pushOption(args, '--prompt', core.getInput('prompt_path') || 'prompts/codex-release-template.md');\n  pushOption(args, '--model', core.getInput('model'));\n  pushOption(args, '--effort', core.getInput('effort'));\n  pushOption(args, '--codex-bin', core.getInput('codex_bin'));\n  pushOption(args, '--notes-extra', core.getInput('notes_extra'));\n  pushOption(args, '--project-name', core.getInput('project_name'));\n  pushOption(args, '--project-language', core.getInput('project_language'));\n  pushOption(args, '--package-name', core.getInput('package_name'));\n  pushOption(args, '--project-purpose', core.getInput('project_purpose'));\n  pushOption(args, '--repository-url', core.getInput('repository_url'));\n  const commitLimit = core.getInput('commit_limit');\n  if (commitLimit) {\n    args.push('--commit-limit', commitLimit);\n  }\n  if (truthy(core.getInput('dry_run'))) {\n    args.push('--dry-run');\n  }\n  pushSharedCodexFlags(args);\n  return args;\n};\n\nconst buildAutoLabelArgs = () => {\n  const args: string[] = [];\n  pushOption(args, '--prompt', core.getInput('prompt_path') || 'prompts/codex-auto-label.md');\n  const maxLabels = core.getInput('max_labels');\n  if (maxLabels) {\n    args.push('--max-labels', maxLabels);\n  }\n  pushOption(args, '--model', core.getInput('model'));\n  pushOption(args, '--effort', core.getInput('effort'));\n  pushOption(args, '--codex-bin', core.getInput('codex_bin'));\n  pushOption(args, '--event-path', core.getInput('event_path'));\n  if (truthy(core.getInput('dry_run'))) {\n    args.push('--dry-run');\n  }\n  pushSharedCodexFlags(args);\n  return args;\n};\n\nconst buildDocSyncArgs = () => {\n  const args: string[] = [];\n  const docGlobsMultiline = core.getMultilineInput('doc_globs');\n  if (docGlobsMultiline.length) {\n    args.push('--doc-globs', docGlobsMultiline.join('\\n'));\n  }\n  pushOption(args, '--doc-globs-file', core.getInput('doc_globs_file'));\n  pushOption(args, '--prompt-template', core.getInput('prompt_template'));\n  pushOption(args, '--prompt-path', core.getInput('prompt_path'));\n  pushOption(args, '--report-path', core.getInput('report_path'));\n  pushOption(args, '--commits-path', core.getInput('commits_path'));\n  pushOption(args, '--patch-path', core.getInput('patch_path'));\n  pushOption(args, '--files-path', core.getInput('files_path'));\n  pushOption(args, '--base-ref', core.getInput('base_ref'));\n  pushOption(args, '--head-ref', core.getInput('head_ref'));\n  pushOption(args, '--head-sha', core.getInput('head_sha'));\n  pushOption(args, '--pull-number', core.getInput('pull_number'));\n  pushOption(args, '--codex-bin', core.getInput('codex_bin'));\n  pushOption(args, '--model', core.getInput('model'));\n  pushOption(args, '--effort', core.getInput('effort'));\n  pushOption(args, '--safety-strategy', core.getInput('safety_strategy'));\n  if (truthy(core.getInput('dry_run'))) {\n    args.push('--dry-run');\n  }\n  if (!truthy(core.getInput('auto_commit'), true)) {\n    args.push('--no-auto-commit');\n  }\n  if (!truthy(core.getInput('auto_push'), true)) {\n    args.push('--no-auto-push');\n  }\n  if (!truthy(core.getInput('comment'), true)) {\n    args.push('--no-comment');\n  }\n  pushSharedCodexFlags(args);\n  return args;\n};\n\nconst buildArgsForCommand = (command: string) => {\n  switch (command) {\n    case 'review':\n      return buildReviewArgs();\n    case 'go-tests':\n      return buildGoTestArgs();\n    case 'release':\n      return buildReleaseArgs();\n    case 'auto-label':\n      return buildAutoLabelArgs();\n    case 'doc-sync':\n      return buildDocSyncArgs();\n    default:\n      throw new Error(`Unsupported command: ${command}`);\n  }\n};\n\nasync function run() {\n  try {\n    const command = core.getInput('command', { required: true }).trim();\n    const args = buildArgsForCommand(command);\n    const program = createProgram();\n    await program.parseAsync(['node', 'action', command, ...args]);\n  } catch (error) {\n    logger.fatal(error);\n    core.setFailed(error instanceof Error ? error.message : String(error));\n  }\n}\n\nvoid run();\n","import { Command } from 'commander';\nimport { registerAutoLabelCommand } from './commands/auto-label';\nimport { registerDocSyncCommand } from './commands/doc-sync';\nimport { registerGoTestsCommand } from './commands/go-tests';\nimport { registerReleaseCommand } from './commands/release';\nimport { registerReviewCommand } from './commands/review';\n\nexport const createProgram = () => {\n  const program = new Command();\n  program\n    .name('codex-workflows')\n    .description('Unified Codex workflow CLI for GitHub Actions and local use.')\n    .version(process.env.npm_package_version ?? '0.0.0');\n\n  registerReviewCommand(program);\n  registerGoTestsCommand(program);\n  registerReleaseCommand(program);\n  registerAutoLabelCommand(program);\n  registerDocSyncCommand(program);\n\n  return program;\n};\n","import { Command } from 'commander';\nimport path from 'node:path';\nimport { CodexClient } from '../lib/codex';\nimport { loadActionContext, parseRepo, readEventPayload } from '../lib/context';\nimport {\n  addLabelsToIssue,\n  ensureLabelsExist,\n  requireIssueNumber,\n  type IssueEventPayload\n} from '../lib/github';\nimport { logger } from '../lib/logger';\n\ninterface AutoLabelOptions {\n  prompt: string;\n  maxLabels: number;\n  model?: string;\n  effort?: string;\n  codexBin?: string;\n  dryRun?: boolean;\n  eventPath?: string;\n  enableNetwork?: boolean;\n  enableWebSearch?: boolean;\n  repo?: string;\n}\n\nconst AUTO_LABEL_SCHEMA = 'prompts/codex-auto-label-schema.json';\n\nconst buildInput = (payload: IssueEventPayload) => {\n  const title = payload.issue?.title ?? 'Untitled';\n  const body = payload.issue?.body ?? 'No description provided';\n  const type = payload.issue?.pull_request ? 'pull request' : 'issue';\n  return `Title: ${title}\\nType: ${type}\\n---\\n${body}`;\n};\n\nconst parseLabels = (raw: string, limit: number) => {\n  try {\n    const parsed = JSON.parse(raw);\n    if (Array.isArray(parsed)) {\n      return parsed\n        .map((label) => String(label).trim())\n        .filter(Boolean)\n        .slice(0, limit);\n    }\n  } catch (error) {\n    logger.warn('Failed to parse Codex JSON output, falling back to line parsing', {\n      message: (error as Error).message\n    });\n  }\n\n  return raw\n    .split(/[,\\n]/)\n    .map((label) => label.trim())\n    .filter(Boolean)\n    .slice(0, limit);\n};\n\nexport const registerAutoLabelCommand = (program: Command) => {\n  program\n    .command('auto-label')\n    .description('Suggest and apply labels using Codex output')\n    .option('--prompt <path>', 'Prompt file path', 'prompts/codex-auto-label.md')\n    .option('--max-labels <number>', 'Maximum labels to apply', (value) => Number.parseInt(value, 10), 3)\n    .option('--model <name>', 'Codex model override')\n    .option('--effort <level>', 'Codex effort override')\n    .option('--codex-bin <path>', 'Override Codex binary path for the SDK', 'codex')\n    .option('--enable-network', 'Allow Codex outbound network access', false)\n    .option('--enable-web-search', 'Allow Codex to run web searches', false)\n    .option('--dry-run', 'Print suggested labels without applying', false)\n    .option('--event-path <path>', 'Event payload override')\n    .option('--repo <owner/repo>', 'Override repository when running locally')\n    .action(async (opts: AutoLabelOptions) => {\n      const repoOverride = opts.repo ? parseRepo(opts.repo) : undefined;\n      const ctx = loadActionContext({ eventPath: opts.eventPath, repo: repoOverride });\n      const payload = readEventPayload<IssueEventPayload>(ctx.eventPath) ?? {};\n      const input = buildInput(payload);\n      const codex = new CodexClient(opts.codexBin);\n      const raw = await codex.run({\n        promptPath: path.resolve(opts.prompt),\n        input,\n        model: opts.model,\n        effort: opts.effort,\n        outputSchemaPath: path.resolve(AUTO_LABEL_SCHEMA),\n        networkAccessEnabled: Boolean(opts.enableNetwork),\n        webSearchEnabled: Boolean(opts.enableWebSearch)\n      });\n      const labels = parseLabels(raw, opts.maxLabels);\n\n      if (!labels.length) {\n        logger.info('Codex did not return any labels. Nothing to do.');\n        return;\n      }\n\n      if (opts.dryRun) {\n        logger.info(`Suggested labels: ${labels.join(', ')}`);\n        return;\n      }\n\n      const issueNumber = requireIssueNumber(payload);\n      await ensureLabelsExist(ctx, labels);\n      await addLabelsToIssue(ctx, issueNumber, labels);\n      logger.info(`Applied labels to #${issueNumber}: ${labels.join(', ')}`);\n    });\n};\n","import type { ModelReasoningEffort, SandboxMode, ThreadEvent, ThreadItem } from '@openai/codex-sdk';\nimport fs from 'node:fs';\nimport os from 'node:os';\nimport path from 'node:path';\nimport { readPromptFile } from './files';\nimport { logger } from './logger';\n\nconst AUTH_DIR = path.join(os.homedir(), '.codex');\nconst AUTH_PATH = path.join(AUTH_DIR, 'auth.json');\n\nexport interface CodexRunOptions {\n  promptPath: string;\n  input?: string;\n  model?: string;\n  effort?: string;\n  sandboxMode?: SandboxMode;\n  workingDirectory?: string;\n  skipGitRepoCheck?: boolean;\n  extraEnv?: Record<string, string>;\n  outputSchemaPath?: string;\n  networkAccessEnabled?: boolean;\n  webSearchEnabled?: boolean;\n}\n\nconst decodeCodexAuth = (): string | undefined => {\n  if (process.env.CODEX_AUTH_JSON) {\n    return process.env.CODEX_AUTH_JSON;\n  }\n\n  const encoded = process.env.CODEX_AUTH_JSON_B64;\n  if (!encoded) {\n    return undefined;\n  }\n\n  return Buffer.from(encoded, 'base64').toString('utf8');\n};\n\nconst ensureAuthDirectory = () => {\n  if (!fs.existsSync(AUTH_DIR)) {\n    fs.mkdirSync(AUTH_DIR, { recursive: true });\n  }\n};\n\nexport const ensureAuthFile = () => {\n  const decoded = decodeCodexAuth();\n  ensureAuthDirectory();\n\n  if (decoded) {\n    const normalized = decoded.trim();\n    const current = fs.existsSync(AUTH_PATH) ? fs.readFileSync(AUTH_PATH, 'utf8') : undefined;\n    if (current !== normalized) {\n      fs.writeFileSync(AUTH_PATH, normalized, 'utf8');\n    }\n    return AUTH_PATH;\n  }\n\n  if (!fs.existsSync(AUTH_PATH)) {\n    throw new Error(\n      'Missing Codex credentials. Provide CODEX_AUTH_JSON / CODEX_AUTH_JSON_B64 or pre-provision ~/.codex/auth.json.'\n    );\n  }\n\n  return AUTH_PATH;\n};\n\nconst composePrompt = (promptPath: string, input?: string) => {\n  const prompt = readPromptFile(promptPath);\n  if (!input) {\n    return prompt;\n  }\n\n  return `${prompt}\\n\\n---\\n\\n${input}`;\n};\n\nconst loadSchema = (schemaPath?: string): unknown => {\n  if (!schemaPath) {\n    return undefined;\n  }\n  const resolved = path.resolve(schemaPath);\n  if (!fs.existsSync(resolved)) {\n    throw new Error(`Codex output schema not found at ${resolved}`);\n  }\n\n  try {\n    return JSON.parse(fs.readFileSync(resolved, 'utf8'));\n  } catch (error) {\n    throw new Error(`Failed to parse Codex schema at ${resolved}: ${(error as Error).message}`);\n  }\n};\n\nconst normalizeEffort = (value?: string): ModelReasoningEffort | undefined => {\n  if (!value) {\n    return undefined;\n  }\n\n  const normalized = value.trim().toLowerCase();\n  const allowed: ModelReasoningEffort[] = ['minimal', 'low', 'medium', 'high'];\n  if (allowed.includes(normalized as ModelReasoningEffort)) {\n    return normalized as ModelReasoningEffort;\n  }\n\n  logger.warn(`Unsupported Codex effort value \"${value}\". Falling back to default.`);\n  return undefined;\n};\n\ntype CodexModule = typeof import('@openai/codex-sdk');\ntype CodexInstance = InstanceType<CodexModule['Codex']>;\n\nconst loadCodexModule = async () => import('@openai/codex-sdk');\n\nexport class CodexClient {\n  private codexInstance?: CodexInstance;\n  private readonly codexBinary?: string;\n\n  constructor(codexBinary?: string) {\n    this.codexBinary = codexBinary;\n  }\n\n  private async getCodex() {\n    ensureAuthFile();\n    if (!this.codexInstance) {\n      const { Codex } = await loadCodexModule();\n      const options =\n        this.codexBinary && this.codexBinary !== 'codex'\n          ? { codexPathOverride: this.codexBinary }\n          : undefined;\n      this.codexInstance = new Codex(options);\n    }\n    return this.codexInstance;\n  }\n\n  async run(options: CodexRunOptions) {\n    const payload = composePrompt(path.resolve(options.promptPath), options.input);\n    const outputSchema = loadSchema(options.outputSchemaPath);\n\n    return this.withEnv(options.extraEnv, async () => {\n      const codex = await this.getCodex();\n      const thread = codex.startThread({\n        model: options.model,\n        modelReasoningEffort: normalizeEffort(options.effort),\n        sandboxMode: options.sandboxMode,\n        workingDirectory: options.workingDirectory,\n        skipGitRepoCheck: options.skipGitRepoCheck,\n        networkAccessEnabled: options.networkAccessEnabled ?? false,\n        webSearchEnabled: options.webSearchEnabled ?? false\n      });\n\n      const streamed = await thread.runStreamed(payload, { outputSchema });\n      const result = await collectStreamedTurn(streamed.events);\n      return result.trim();\n    });\n  }\n\n  private async withEnv<T>(extraEnv: Record<string, string> | undefined, fn: () => Promise<T>) {\n    if (!extraEnv || Object.keys(extraEnv).length === 0) {\n      return fn();\n    }\n\n    const previous = new Map<string, string | undefined>();\n    Object.entries(extraEnv).forEach(([key, value]) => {\n      previous.set(key, process.env[key]);\n      process.env[key] = value;\n    });\n\n    try {\n      return await fn();\n    } finally {\n      previous.forEach((value, key) => {\n        if (value === undefined) {\n          delete process.env[key];\n        } else {\n          process.env[key] = value;\n        }\n      });\n    }\n  }\n}\n\nconst collectStreamedTurn = async (events: AsyncGenerator<ThreadEvent>) => {\n  const items: any[] = [];\n  let finalResponse = '';\n  let turnFailure: { message: string } | null = null;\n\n  for await (const event of events) {\n    logEvent(event);\n    if (event.type === 'item.started' || event.type === 'item.updated') {\n      continue;\n    }\n    if (event.type === 'item.completed') {\n      items.push(event.item);\n      if (event.item.type === 'agent_message') {\n        finalResponse = event.item.text;\n      }\n    } else if (event.type === 'turn.failed') {\n      turnFailure = event.error;\n      break;\n    }\n  }\n\n  if (turnFailure) {\n    throw new Error(turnFailure.message);\n  }\n\n  if (!finalResponse) {\n    const summaryItem = items.find((item) => item.type === 'agent_message');\n    if (summaryItem) {\n      finalResponse = summaryItem.text ?? '';\n    }\n  }\n  return finalResponse;\n};\n\nconst logEvent = (event: ThreadEvent) => {\n  if (event.type === 'item.completed') {\n    const message = formatItemMessage(event.item);\n    if (message) {\n      writeStdout(message);\n      return;\n    }\n  }\n\n  if (event.type === 'turn.failed') {\n    logger.error(`Codex turn failed: ${event.error.message}`);\n  }\n};\n\nconst formatItemMessage = (item: ThreadItem) => {\n  switch (item.type) {\n    case 'agent_message':\n      return item.text?.trim();\n    case 'reasoning':\n      return item.text?.trim();\n    case 'command_execution':\n      if (item.command) {\n        const output = item.aggregated_output?.trim();\n        return output\n          ? `$ ${item.command}\\n${output}`\n          : `$ ${item.command}`;\n      }\n      return undefined;\n    case 'error':\n      return `Error: ${item.message}`;\n    default:\n      return undefined;\n  }\n};\n\nconst writeStdout = (message: string) => {\n  if (!message) {\n    return;\n  }\n  const formatted = message.endsWith('\\n') ? message : `${message}\\n`;\n  process.stdout.write(formatted);\n};\n","import fs from 'node:fs';\nimport path from 'node:path';\n\nexport const readFileIfExists = (filePath: string): string | undefined => {\n  if (!fs.existsSync(filePath)) {\n    return undefined;\n  }\n\n  return fs.readFileSync(filePath, 'utf8');\n};\n\nexport const readPromptFile = (relativePath: string): string => {\n  const absPath = path.resolve(relativePath);\n  if (!fs.existsSync(absPath)) {\n    throw new Error(`Prompt file not found: ${absPath}`);\n  }\n  return fs.readFileSync(absPath, 'utf8');\n};\n\nexport const writeFile = (filePath: string, contents: string) => {\n  fs.mkdirSync(path.dirname(filePath), { recursive: true });\n  fs.writeFileSync(filePath, contents, 'utf8');\n};\n","import * as core from '@actions/core';\n\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\n\nconst inActions = process.env.GITHUB_ACTIONS === 'true';\n\nconst serialize = (value?: Record<string, unknown> | string) => {\n  if (!value) {\n    return '';\n  }\n\n  if (typeof value === 'string') {\n    return value;\n  }\n\n  return JSON.stringify(value);\n};\n\nconst logToConsole = (level: LogLevel, message: string, details?: Record<string, unknown> | string) => {\n  const suffix = serialize(details);\n  const body = suffix ? `${message} ${suffix}` : message;\n\n  if (inActions) {\n    switch (level) {\n      case 'debug':\n        core.debug(body);\n        return;\n      case 'info':\n        core.info(body);\n        return;\n      case 'warn':\n        core.warning(body);\n        return;\n      case 'error':\n        core.error(body);\n        return;\n    }\n  }\n\n  const target = level === 'error' ? console.error : level === 'warn' ? console.warn : console.log;\n  target(`[${level.toUpperCase()}] ${body}`);\n};\n\nexport const logger = {\n  debug: (message: string, details?: Record<string, unknown> | string) =>\n    logToConsole('debug', message, details),\n  info: (message: string, details?: Record<string, unknown> | string) =>\n    logToConsole('info', message, details),\n  warn: (message: string, details?: Record<string, unknown> | string) =>\n    logToConsole('warn', message, details),\n  error: (message: string, details?: Record<string, unknown> | string) =>\n    logToConsole('error', message, details),\n  fatal: (error: unknown) => {\n    if (error instanceof Error) {\n      logToConsole('error', error.message, { stack: error.stack });\n    } else {\n      logToConsole('error', 'Unknown fatal error', { error });\n    }\n  }\n};\n","import { getOctokit } from '@actions/github';\nimport { execSync } from 'node:child_process';\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport { optionalEnv } from './env';\n\nexport type RepoRef = {\n  owner: string;\n  repo: string;\n};\n\nexport interface ActionContext {\n  token: string;\n  repo: RepoRef;\n  workspace: string;\n  eventPath?: string;\n  octokit: ReturnType<typeof getOctokit>;\n}\n\nexport const parseRepo = (value?: string): RepoRef => {\n  if (!value) {\n    throw new Error('Unable to determine repository (missing GITHUB_REPOSITORY).');\n  }\n  const [owner, repo] = value.split('/', 2);\n  if (!owner || !repo) {\n    throw new Error(`Invalid GITHUB_REPOSITORY value: ${value}`);\n  }\n\n  return { owner, repo };\n};\n\nconst detectRepoFromGit = (): RepoRef | undefined => {\n  try {\n    const remote = execSync('git config --get remote.origin.url', {\n      encoding: 'utf8',\n      stdio: ['ignore', 'pipe', 'ignore']\n    })\n      .trim()\n      .replace(/\\.git$/i, '');\n\n    if (!remote) {\n      return undefined;\n    }\n\n    if (remote.startsWith('git@')) {\n      const match = remote.match(/^git@[^:]+:(.+?)\\/(.+)$/);\n      if (match) {\n        return { owner: match[1], repo: match[2] };\n      }\n    } else if (remote.startsWith('http://') || remote.startsWith('https://')) {\n      const url = new URL(remote);\n      const parts = url.pathname.replace(/^\\//, '').split('/', 2);\n      if (parts.length === 2) {\n        return { owner: parts[0], repo: parts[1] };\n      }\n    }\n  } catch {\n    return undefined;\n  }\n\n  return undefined;\n};\n\nexport const loadActionContext = (overrides?: Partial<{ token: string; repo: RepoRef; workspace: string; eventPath: string }>): ActionContext => {\n  const token = overrides?.token ?? optionalEnv('GITHUB_TOKEN');\n  if (!token) {\n    throw new Error('GITHUB_TOKEN is required to call GitHub APIs.');\n  }\n\n  const repo =\n    overrides?.repo ??\n    ((): RepoRef => {\n      const fromEnv = optionalEnv('GITHUB_REPOSITORY');\n      if (fromEnv) {\n        return parseRepo(fromEnv);\n      }\n      const fromGit = detectRepoFromGit();\n      if (fromGit) {\n        return fromGit;\n      }\n      throw new Error('Unable to determine repository (missing GITHUB_REPOSITORY and git remote).');\n    })();\n  const workspace = overrides?.workspace ?? optionalEnv('GITHUB_WORKSPACE') ?? process.cwd();\n  const eventPath = overrides?.eventPath ?? optionalEnv('GITHUB_EVENT_PATH');\n\n  return {\n    token,\n    repo,\n    workspace,\n    eventPath,\n    octokit: getOctokit(token)\n  };\n};\n\nexport const readEventPayload = <T>(eventPath?: string): T | undefined => {\n  const resolvedPath = eventPath ?? optionalEnv('GITHUB_EVENT_PATH');\n  if (!resolvedPath) {\n    return undefined;\n  }\n\n  if (!fs.existsSync(resolvedPath)) {\n    throw new Error(`GITHUB_EVENT_PATH points to a missing file: ${resolvedPath}`);\n  }\n\n  const raw = fs.readFileSync(resolvedPath, 'utf8');\n  try {\n    return JSON.parse(raw) as T;\n  } catch (error) {\n    throw new Error(`Unable to parse event payload at ${path.resolve(resolvedPath)}: ${(error as Error).message}`);\n  }\n};\n","import { MissingEnvError } from './errors';\n\nexport const requireEnv = (name: string): string => {\n  const value = process.env[name];\n  if (!value) {\n    throw new MissingEnvError(name);\n  }\n\n  return value;\n};\n\nexport const optionalEnv = (name: string, fallback?: string): string | undefined => {\n  const value = process.env[name];\n  return value ?? fallback;\n};\n\nexport const asBoolean = (name: string, defaultValue = false): boolean => {\n  const value = process.env[name];\n  if (value === undefined) {\n    return defaultValue;\n  }\n\n  return ['1', 'true', 'yes', 'on'].includes(value.toLowerCase());\n};\n","import type { components } from '@octokit/openapi-types';\nimport { logger } from './logger';\nimport type { ActionContext } from './context';\n\nexport type PullRequest = components['schemas']['pull-request'];\nexport type Issue = components['schemas']['issue'];\n\nexport interface PullRequestEventPayload {\n  pull_request?: PullRequest;\n  repository?: components['schemas']['repository'];\n}\n\nexport interface IssueEventPayload {\n  issue?: Issue;\n}\n\nexport const requirePullRequestNumber = (payload?: PullRequestEventPayload): number => {\n  const prNumber = payload?.pull_request?.number;\n  if (!prNumber) {\n    throw new Error('This command must be triggered from a pull_request event.');\n  }\n\n  return prNumber;\n};\n\nexport const requireIssueNumber = (payload?: IssueEventPayload): number => {\n  const issueNumber = payload?.issue?.number;\n  if (!issueNumber) {\n    throw new Error('This command must be triggered from an issue or pull_request event.');\n  }\n\n  return issueNumber;\n};\n\nexport const fetchPullRequest = async (ctx: ActionContext, pullNumber: number) => {\n  const response = await ctx.octokit.rest.pulls.get({\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    pull_number: pullNumber\n  });\n\n  return response.data;\n};\n\nexport const listPullRequestFiles = async (ctx: ActionContext, pullNumber: number) => {\n  const files = await ctx.octokit.paginate(ctx.octokit.rest.pulls.listFiles, {\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    pull_number: pullNumber,\n    per_page: 100\n  });\n  return files;\n};\n\nexport const createReview = async (\n  ctx: ActionContext,\n  pullNumber: number,\n  body: string,\n  event: 'COMMENT' | 'APPROVE' | 'REQUEST_CHANGES' = 'COMMENT'\n) => {\n  await ctx.octokit.rest.pulls.createReview({\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    pull_number: pullNumber,\n    body,\n    event\n  });\n};\n\nexport const createIssueComment = async (ctx: ActionContext, issueNumber: number, body: string) => {\n  await ctx.octokit.rest.issues.createComment({\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    issue_number: issueNumber,\n    body\n  });\n};\n\nexport const ensureLabelsExist = async (ctx: ActionContext, labels: string[]) => {\n  if (!labels.length) {\n    return;\n  }\n\n  const existing = await ctx.octokit.paginate(ctx.octokit.rest.issues.listLabelsForRepo, {\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    per_page: 100\n  });\n\n  const existingNames = new Set(existing.map((label) => label.name));\n  for (const label of labels) {\n    if (existingNames.has(label)) {\n      continue;\n    }\n\n    logger.info(`Creating label ${label}`);\n    await ctx.octokit.rest.issues.createLabel({\n      owner: ctx.repo.owner,\n      repo: ctx.repo.repo,\n      name: label\n    });\n  }\n};\n\nexport const addLabelsToIssue = async (ctx: ActionContext, issueNumber: number, labels: string[]) => {\n  if (!labels.length) {\n    return;\n  }\n\n  await ctx.octokit.rest.issues.addLabels({\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    issue_number: issueNumber,\n    labels\n  });\n};\n\nexport const createOrUpdateRelease = async (\n  ctx: ActionContext,\n  params: {\n    tag: string;\n    target?: string;\n    releaseName?: string;\n    body?: string;\n    draft?: boolean;\n  }\n) => {\n  const existing = await ctx.octokit.rest.repos.getReleaseByTag({\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    tag: params.tag\n  }).catch((error: any) => {\n    if (error.status === 404) {\n      return undefined;\n    }\n    throw error;\n  });\n\n  if (existing) {\n    logger.info(`Updating existing release ${params.tag}`);\n    await ctx.octokit.rest.repos.updateRelease({\n      owner: ctx.repo.owner,\n      repo: ctx.repo.repo,\n      release_id: existing.data.id,\n      tag_name: params.tag,\n      target_commitish: params.target ?? 'main',\n      body: params.body,\n      draft: params.draft,\n      name: params.releaseName ?? params.tag\n    });\n    return existing.data.html_url;\n  }\n\n  logger.info(`Creating release ${params.tag}`);\n  const created = await ctx.octokit.rest.repos.createRelease({\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    tag_name: params.tag,\n    target_commitish: params.target ?? 'main',\n    name: params.releaseName ?? params.tag,\n    body: params.body,\n    draft: params.draft ?? false\n  });\n\n  return created.data.html_url;\n};\n\nexport const listRecentCommits = async (\n  ctx: ActionContext,\n  params: { target?: string; limit?: number }\n) => {\n  const commits = await ctx.octokit.paginate(ctx.octokit.rest.repos.listCommits, {\n    owner: ctx.repo.owner,\n    repo: ctx.repo.repo,\n    sha: params.target,\n    per_page: Math.min(params.limit ?? 50, 100)\n  });\n\n  return commits.slice(0, params.limit ?? 50);\n};\n","import { Command } from 'commander';\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport { CodexClient } from '../lib/codex';\nimport { loadActionContext, parseRepo, readEventPayload } from '../lib/context';\nimport { createIssueComment, requirePullRequestNumber, type PullRequestEventPayload } from '../lib/github';\nimport {\n  DEFAULT_DOC_GLOBS,\n  assertDocsOnlyChanged,\n  classifyDiffFiles,\n  collectCommitSummary,\n  computeDocPatch,\n  hasPendingChanges,\n  parseDocPatterns,\n  saveFileList,\n  writeDocGlobsFile\n} from '../lib/doc-sync';\nimport { renderTemplateFile } from '../lib/templates';\nimport { commitAll, ensureGitUser, getHeadSha, pushChanges } from '../lib/git';\nimport { logger } from '../lib/logger';\n\ninterface DocSyncOptions {\n  docGlobs?: string;\n  docGlob?: string[];\n  docGlobsFile: string;\n  promptTemplate: string;\n  promptPath: string;\n  reportPath: string;\n  commitsPath: string;\n  patchPath: string;\n  filesPath: string;\n  baseRef?: string;\n  headRef?: string;\n  headSha?: string;\n  pullNumber?: number;\n  codexBin?: string;\n  model?: string;\n  effort?: string;\n  codexArgs?: string;\n  safetyStrategy?: string;\n  dryRun?: boolean;\n  autoCommit?: boolean;\n  autoPush?: boolean;\n  comment?: boolean;\n  eventPath?: string;\n  enableNetwork?: boolean;\n  enableWebSearch?: boolean;\n  repo?: string;\n}\n\nconst readFileOrDefault = (filePath: string, fallback: string) => {\n  if (!fs.existsSync(filePath)) {\n    return fallback;\n  }\n  const contents = fs.readFileSync(filePath, 'utf8').trim();\n  return contents || fallback;\n};\n\nconst collectDocPatterns = (options: DocSyncOptions) => {\n  if (options.docGlob?.length) {\n    return parseDocPatterns(options.docGlob.join('\\n'));\n  }\n  if (options.docGlobs) {\n    return parseDocPatterns(options.docGlobs);\n  }\n  return [...DEFAULT_DOC_GLOBS];\n};\n\nconst ensureGitIgnoreEntries = (paths: string[]) => {\n  const excludePath = path.resolve('.git/info/exclude');\n  fs.mkdirSync(path.dirname(excludePath), { recursive: true });\n  const existing = fs.existsSync(excludePath)\n    ? fs.readFileSync(excludePath, 'utf8').split(/\\r?\\n/).filter(Boolean)\n    : [];\n  const entries = new Set(existing);\n  let changed = false;\n  paths\n    .map((entry) => entry.trim())\n    .filter(Boolean)\n    .forEach((entry) => {\n      if (!entries.has(entry)) {\n        entries.add(entry);\n        changed = true;\n      }\n    });\n  if (changed) {\n    fs.writeFileSync(excludePath, `${Array.from(entries).join('\\n')}\\n`, 'utf8');\n  }\n};\n\nexport const registerDocSyncCommand = (program: Command) => {\n  program\n    .command('doc-sync')\n    .description('Run the documentation sync workflow end-to-end.')\n    .option('--doc-globs <multiline>', 'Newline-separated glob list defining documentation scope')\n    .option('--doc-glob <pattern>', 'Additional doc glob (can be repeated)', (value, prev: string[] = []) => {\n      prev.push(value);\n      return prev;\n    })\n    .option('--doc-globs-file <path>', 'Path where doc globs manifest will be written', 'doc-globs.txt')\n    .option('--prompt-template <path>', 'Codex prompt template', 'prompts/codex-doc-sync.md')\n    .option('--prompt-path <path>', 'Rendered prompt destination', 'codex_prompt.md')\n    .option('--report-path <path>', 'Doc summary markdown path', 'doc-sync-report.md')\n    .option('--commits-path <path>', 'Commit summary path', 'doc-commits.md')\n    .option('--patch-path <path>', 'Diff patch output', 'doc-changes.patch')\n    .option('--files-path <path>', 'Touched file list output', 'doc-changes.txt')\n    .option('--base-ref <ref>', 'Base branch ref (default: PR base or main)')\n    .option('--head-ref <ref>', 'Head branch ref (default: PR head)')\n    .option('--head-sha <sha>', 'Head commit SHA override')\n    .option('--pull-number <number>', 'Pull request number', (value) => Number.parseInt(value, 10))\n    .option('--codex-bin <path>', 'Override Codex binary path for the SDK', 'codex')\n    .option('--model <name>', 'Codex model override')\n    .option('--effort <level>', 'Codex effort override')\n    .option('--safety-strategy <mode>', 'Legacy safety strategy flag (ignored when using the SDK)')\n    .option('--dry-run', 'Skip committing/pushing, only show summary', false)\n    .option('--no-auto-commit', 'Do not create a git commit')\n    .option('--no-auto-push', 'Do not push changes upstream')\n    .option('--no-comment', 'Skip PR comment')\n    .option('--event-path <path>', 'Event payload override path')\n    .option('--repo <owner/repo>', 'Override repository when running locally')\n    .option('--enable-network', 'Allow Codex outbound network access', false)\n    .option('--enable-web-search', 'Allow Codex to run web searches', false)\n    .action(async (opts: DocSyncOptions) => {\n      const repoOverride = opts.repo ? parseRepo(opts.repo) : undefined;\n      const ctx = loadActionContext({ eventPath: opts.eventPath, repo: repoOverride });\n      const payload = readEventPayload<PullRequestEventPayload>(ctx.eventPath) ?? {};\n      const repoFull = `${ctx.repo.owner}/${ctx.repo.repo}`;\n      const pullNumber =\n        opts.pullNumber ??\n        (payload.pull_request ? requirePullRequestNumber(payload) : undefined);\n      if (!pullNumber) {\n        throw new Error('doc-sync requires a pull request context or --pull-number');\n      }\n\n      const headRepoFull = payload.pull_request?.head?.repo?.full_name;\n      if (headRepoFull && headRepoFull !== repoFull) {\n        throw new Error(\n          `Head repo ${headRepoFull} differs from workflow repo ${repoFull}; doc-sync cannot push.`\n        );\n      }\n\n      const baseRef =\n        opts.baseRef ?? payload.pull_request?.base?.ref ?? process.env.GITHUB_BASE_REF ?? 'main';\n      const headRef =\n        opts.headRef ?? payload.pull_request?.head?.ref ?? process.env.GITHUB_HEAD_REF ?? 'HEAD';\n      const headSha = opts.headSha ?? payload.pull_request?.head?.sha ?? process.env.GITHUB_SHA;\n\n      const docPatterns = collectDocPatterns(opts);\n      ensureGitIgnoreEntries([\n        opts.reportPath,\n        opts.commitsPath,\n        opts.docGlobsFile,\n        opts.promptPath,\n        opts.patchPath,\n        opts.filesPath\n      ]);\n      const docGlobsPath = writeDocGlobsFile(docPatterns, opts.docGlobsFile);\n      await collectCommitSummary({ baseRef, headRef, headSha, outputPath: opts.commitsPath });\n\n      const docScope = docPatterns.map((pattern) => `- ${pattern}`).join('\\n');\n      const commitSummary = readFileOrDefault(opts.commitsPath, '- No commits provided.');\n      renderTemplateFile({\n        templatePath: opts.promptTemplate,\n        outputPath: opts.promptPath,\n        variables: {\n          '{{BASE_REF}}': baseRef,\n          '{{HEAD_REF}}': headRef,\n          '{{PR_NUMBER}}': String(pullNumber),\n          '{{REPOSITORY}}': repoFull,\n          '{{DOC_SCOPE}}': docScope,\n          '{{COMMIT_SUMMARY}}': commitSummary,\n          '{{REPORT_PATH}}': opts.reportPath\n        }\n      });\n\n      if (opts.codexArgs) {\n        logger.warn('codexArgs are not supported when using the Codex SDK and will be ignored.');\n      }\n      if (opts.safetyStrategy) {\n        logger.warn('safetyStrategy is not configurable via the Codex SDK and will be ignored.');\n      }\n      const codex = new CodexClient(opts.codexBin);\n      const extraEnv = {\n        DOC_REPORT_PATH: path.resolve(opts.reportPath),\n        DOC_BASE_REF: baseRef,\n        DOC_HEAD_REF: headRef,\n        DOC_HEAD_SHA: headSha ?? '',\n        DOC_PR_NUMBER: String(pullNumber),\n        DOC_REPOSITORY: repoFull,\n        DOC_GLOBS_FILE: docGlobsPath,\n        GH_TOKEN: process.env.GITHUB_TOKEN ?? '',\n        GITHUB_TOKEN: process.env.GITHUB_TOKEN ?? ''\n      };\n\n      await codex.run({\n        promptPath: path.resolve(opts.promptPath),\n        model: opts.model,\n        effort: opts.effort,\n        extraEnv,\n        networkAccessEnabled: Boolean(opts.enableNetwork),\n        webSearchEnabled: Boolean(opts.enableWebSearch)\n      });\n\n      await assertDocsOnlyChanged(docPatterns);\n      const { docFiles } = await classifyDiffFiles(docPatterns);\n      if (!docFiles.length) {\n        logger.info('Codex did not modify documentation files.');\n        return;\n      }\n\n      await saveFileList(docFiles, opts.filesPath);\n      await computeDocPatch(opts.patchPath);\n\n      if (opts.dryRun) {\n        logger.info('Doc-sync dry run complete. Files touched:');\n        docFiles.forEach((file) => logger.info(` - ${file}`));\n        return;\n      }\n\n      const pendingChanges = await hasPendingChanges();\n      if (pendingChanges && opts.autoCommit === false) {\n        logger.warn('auto-commit disabled; documentation edits remain uncommitted.');\n      }\n\n      if (pendingChanges && opts.autoCommit !== false) {\n        await ensureGitUser();\n        await commitAll(`[skip ci][doc-sync] Auto-update docs for PR #${pullNumber}`);\n      }\n\n      const commitSha = await getHeadSha();\n\n      if (opts.autoPush !== false) {\n        if (opts.autoCommit === false && pendingChanges) {\n          throw new Error('Cannot push documentation updates when auto-commit is disabled.');\n        }\n        await pushChanges({ ref: `HEAD:${headRef}` });\n        logger.info(`Pushed documentation updates to ${headRef}`);\n      } else {\n        logger.info('autoPush disabled; skipping git push.');\n      }\n\n      if (opts.comment !== false) {\n        const report = readFileOrDefault(opts.reportPath, 'Doc sync completed.');\n        const filesList = docFiles.map((file) => `- ${file}`).join('\\n') || '- (none)';\n        const body = [\n          'ðŸ¤– Documentation synchronized automatically.',\n          '',\n          report,\n          '',\n          'Updated files:',\n          filesList,\n          '',\n          `Commit: ${commitSha}`\n        ].join('\\n');\n        await createIssueComment(ctx, pullNumber, body);\n        logger.info('Posted documentation summary comment.');\n      }\n    });\n};\n","import fs from 'node:fs';\nimport path from 'node:path';\nimport { runCommand } from './exec';\nimport { logger } from './logger';\n\nexport const DEFAULT_DOC_GLOBS = ['docs/**', '**/*.md', 'README*'];\n\nexport const parseDocPatterns = (input?: string | string[]): string[] => {\n  if (!input) {\n    return [...DEFAULT_DOC_GLOBS];\n  }\n\n  if (Array.isArray(input)) {\n    const patterns = input.map((value) => value.trim()).filter(Boolean);\n    return patterns.length ? patterns : [...DEFAULT_DOC_GLOBS];\n  }\n\n  const lines = input\n    .split(/\\r?\\n/)\n    .map((line) => line.trim())\n    .filter(Boolean);\n  return lines.length ? lines : [...DEFAULT_DOC_GLOBS];\n};\n\nexport const writeDocGlobsFile = (patterns: string[], destination: string) => {\n  const abs = path.resolve(destination);\n  fs.mkdirSync(path.dirname(abs), { recursive: true });\n  fs.writeFileSync(abs, `${patterns.join('\\n')}\\n`, 'utf8');\n  return abs;\n};\n\nexport const collectCommitSummary = async (options: {\n  baseRef: string;\n  headRef?: string;\n  headSha?: string;\n  outputPath: string;\n}) => {\n  const { baseRef, headRef, headSha, outputPath } = options;\n  const abs = path.resolve(outputPath);\n  const range = headRef ? [`origin/${baseRef}..${headRef}`] : [`origin/${baseRef}..HEAD`];\n  try {\n    await runCommand({ command: 'git', args: ['fetch', '--no-tags', 'origin', baseRef] });\n  } catch (error) {\n    logger.warn('Failed to fetch base ref; continuing with local data', { baseRef, error });\n  }\n\n  try {\n    const { stdout } = await runCommand({\n      command: 'git',\n      args: ['log', '--no-merges', \"--pretty=format:- %s (%h)\", ...range],\n      silent: true\n    });\n    const content = stdout.trim();\n    if (content) {\n      fs.writeFileSync(abs, `${content}\\n`, 'utf8');\n    } else {\n      fs.writeFileSync(\n        abs,\n        `- No commits detected between origin/${baseRef} and ${headSha ?? headRef ?? 'HEAD'}.\\n`,\n        'utf8'\n      );\n    }\n  } catch (error) {\n    logger.warn('Unable to collect commit summary; writing fallback message', { error });\n    fs.writeFileSync(\n      abs,\n      `- Unable to compute commits for base ${baseRef} (${(error as Error).message}).\\n`,\n      'utf8'\n    );\n  }\n};\n\nconst escapeRegex = (segment: string) => segment.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\nconst globToRegex = (glob: string) => {\n  let pattern = '^';\n  for (let i = 0; i < glob.length; i += 1) {\n    const char = glob[i];\n    if (char === '*') {\n      const next = glob[i + 1];\n      if (next === '*') {\n        pattern += '.*';\n        i += 1;\n      } else {\n        pattern += '[^/]*';\n      }\n    } else if (char === '?') {\n      pattern += '[^/]';\n    } else {\n      pattern += escapeRegex(char);\n    }\n  }\n  pattern += '$';\n  return new RegExp(pattern);\n};\n\nconst normalisePath = (filePath: string) => filePath.replace(/\\\\/g, '/').replace(/^\\.\\//, '');\n\nexport const classifyDiffFiles = async (patterns: string[]) => {\n  const regexes = patterns.map(globToRegex);\n  const { stdout } = await runCommand({ command: 'git', args: ['diff', '--name-only'], silent: true });\n  const files = stdout\n    .split(/\\r?\\n/)\n    .map((line: string) => line.trim())\n    .filter(Boolean);\n\n  const docFiles: string[] = [];\n  const otherFiles: string[] = [];\n\n  files.forEach((file: string) => {\n    const normalized = normalisePath(file);\n    if (regexes.some((regex) => regex.test(normalized))) {\n      docFiles.push(file);\n    } else {\n      otherFiles.push(file);\n    }\n  });\n\n  return { docFiles, otherFiles };\n};\n\nexport const assertDocsOnlyChanged = async (patterns: string[]) => {\n  const { otherFiles } = await classifyDiffFiles(patterns);\n  if (otherFiles.length) {\n    throw new Error(`Non-documentation files were modified: ${otherFiles.join(', ')}`);\n  }\n};\n\nexport const saveFileList = (files: string[], outputPath: string) => {\n  const abs = path.resolve(outputPath);\n  fs.mkdirSync(path.dirname(abs), { recursive: true });\n  fs.writeFileSync(abs, `${files.join('\\n')}\\n`, 'utf8');\n};\n\nexport const computeDocPatch = async (outputPath: string) => {\n  const { stdout } = await runCommand({ command: 'git', args: ['diff', '--binary'], silent: true });\n  fs.writeFileSync(path.resolve(outputPath), stdout, 'utf8');\n};\n\nexport const hasPendingChanges = async () => {\n  const { stdout } = await runCommand({\n    command: 'git',\n    args: ['status', '--porcelain'],\n    silent: true\n  });\n  return Boolean(stdout.trim());\n};\n","import { execa, type Options as ExecaOptions, type Result, type ResultPromise } from 'execa';\nimport { logger } from './logger';\n\nexport interface ExecOptions extends ExecaOptions {\n  command: string;\n  args?: string[];\n  silent?: boolean;\n}\n\ntype NormalizedResult = Omit<Result, 'stdout' | 'stderr'> & { stdout: string; stderr: string };\n\nconst normalizeOutput = (value: Result['stdout']) => {\n  if (value === undefined) {\n    return '';\n  }\n  if (typeof value === 'string') {\n    return value;\n  }\n  if (Array.isArray(value)) {\n    return value.join('\\n');\n  }\n  if (value instanceof Uint8Array) {\n    return Buffer.from(value).toString('utf8');\n  }\n  return String(value);\n};\n\nexport const runCommand = async ({ command, args = [], silent, ...options }: ExecOptions): Promise<NormalizedResult> => {\n  logger.debug('exec', { command, args });\n  const subprocess: ResultPromise = execa(command, args, {\n    stdout: 'pipe',\n    stderr: 'pipe',\n    stdin: 'inherit',\n    encoding: 'utf8',\n    ...options\n  });\n\n  if (!silent) {\n    subprocess.stdout?.pipe(process.stdout);\n    subprocess.stderr?.pipe(process.stderr);\n  }\n\n  const result: Result = await subprocess;\n  return {\n    ...result,\n    stdout: normalizeOutput(result.stdout),\n    stderr: normalizeOutput(result.stderr)\n  };\n};\n","import fs from 'node:fs';\nimport path from 'node:path';\n\nconst escapeRegex = (value: string) => value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\nexport interface RenderTemplateOptions {\n  templatePath: string;\n  outputPath: string;\n  variables: Record<string, string>;\n}\n\nexport const renderTemplateFile = ({ templatePath, outputPath, variables }: RenderTemplateOptions) => {\n  const template = fs.readFileSync(path.resolve(templatePath), 'utf8');\n  let rendered = template;\n  for (const [needle, replacement] of Object.entries(variables)) {\n    const regex = new RegExp(escapeRegex(needle), 'g');\n    rendered = rendered.replace(regex, replacement);\n  }\n  fs.mkdirSync(path.dirname(outputPath), { recursive: true });\n  fs.writeFileSync(path.resolve(outputPath), rendered, 'utf8');\n};\n","import { runCommand } from './exec';\n\nexport const listChangedFiles = async (options: {\n  baseRef?: string;\n  headRef?: string;\n  cwd?: string;\n}) => {\n  const args = ['diff', '--name-only'];\n  if (options.baseRef) {\n    args.push(options.baseRef);\n  }\n  if (options.headRef) {\n    args.push(options.headRef);\n  }\n  const { stdout } = await runCommand({\n    command: 'git',\n    args,\n    cwd: options.cwd,\n    silent: true\n  });\n  return stdout.split('\\n').map((line: string) => line.trim()).filter(Boolean);\n};\n\nexport const commitAll = async (message: string, cwd?: string) => {\n  await runCommand({ command: 'git', args: ['add', '--all'], cwd });\n  await runCommand({ command: 'git', args: ['commit', '-m', message], cwd });\n};\n\nexport const pushChanges = async (options: {\n  remote?: string;\n  ref?: string;\n  cwd?: string;\n  forceWithLease?: boolean;\n}) => {\n  const remote = options.remote ?? 'origin';\n  const ref = options.ref ?? 'HEAD';\n  const args = ['push'];\n  if (options.forceWithLease) {\n    args.push('--force-with-lease');\n  }\n  args.push(remote, ref);\n  await runCommand({ command: 'git', args, cwd: options.cwd });\n};\n\nexport const ensureGitUser = async (options?: { name?: string; email?: string; cwd?: string }) => {\n  const name = options?.name ?? 'github-actions[bot]';\n  const email = options?.email ?? 'github-actions[bot]@users.noreply.github.com';\n  await runCommand({ command: 'git', args: ['config', 'user.name', name], cwd: options?.cwd });\n  await runCommand({ command: 'git', args: ['config', 'user.email', email], cwd: options?.cwd });\n};\n\nexport const getHeadSha = async (cwd?: string) => {\n  const { stdout } = await runCommand({ command: 'git', args: ['rev-parse', 'HEAD'], cwd, silent: true });\n  return stdout.trim();\n};\n","import * as core from '@actions/core';\nimport * as tc from '@actions/tool-cache';\nimport fs from 'node:fs';\nimport os from 'node:os';\nimport path from 'node:path';\nimport semver from 'semver';\nimport stringArgv from 'string-argv';\nimport { runCommand } from './exec';\nimport { logger } from './logger';\n\nconst PLATFORM_MAP: Partial<Record<NodeJS.Platform, string>> = {\n  linux: 'linux',\n  darwin: 'darwin',\n  win32: 'windows',\n  aix: 'linux',\n  freebsd: 'linux',\n  openbsd: 'linux',\n  sunos: 'linux',\n  android: 'linux',\n  haiku: 'linux',\n  cygwin: 'windows'\n};\n\nconst ARCH_MAP: Partial<Record<NodeJS.Architecture, string>> = {\n  x64: 'amd64',\n  arm64: 'arm64',\n  arm: 'armv6l',\n  ia32: '386',\n  ppc64: 'ppc64le',\n  s390x: 's390x',\n  loong64: 'loong64',\n  mips: 'mips',\n  mipsel: 'mipsle',\n  riscv64: 'riscv64'\n};\n\nconst normaliseVersion = (value: string) => {\n  const cleaned = value.replace(/^go/i, '');\n  const coerced = semver.coerce(cleaned);\n  return coerced?.version ?? cleaned;\n};\n\nconst detectPlatform = () => PLATFORM_MAP[process.platform] ?? 'linux';\nconst detectArch = () => ARCH_MAP[process.arch] ?? 'amd64';\n\nexport const installGo = async (version: string) => {\n  const normalized = normaliseVersion(version);\n  if (!normalized) {\n    throw new Error(`Unable to parse Go version: ${version}`);\n  }\n\n  const cached = tc.find('go', normalized);\n  if (cached) {\n    const bin = path.join(cached, 'bin');\n    core.addPath(bin);\n    return bin;\n  }\n\n  const platform = detectPlatform();\n  const arch = detectArch();\n  const ext = platform === 'windows' ? 'zip' : 'tar.gz';\n  const filename = `go${normalized}.${platform}-${arch}.${ext}`;\n  const url = `https://go.dev/dl/${filename}`;\n  logger.info(`Downloading Go ${normalized} from ${url}`);\n\n  const downloadPath = await tc.downloadTool(url);\n  const extracted =\n    ext === 'zip' ? await tc.extractZip(downloadPath) : await tc.extractTar(downloadPath);\n  const cachePath = await tc.cacheDir(path.join(extracted, 'go'), 'go', normalized);\n  const binPath = path.join(cachePath, 'bin');\n  core.addPath(binPath);\n  return binPath;\n};\n\nconst readVersionFromFile = (filePath: string): string | undefined => {\n  if (!fs.existsSync(filePath)) {\n    return undefined;\n  }\n\n  const raw = fs.readFileSync(filePath, 'utf8');\n  const match = raw.match(/^go\\s+(\\d+\\.\\d+(?:\\.\\d+)?)$/m);\n  return match?.[1];\n};\n\nexport interface GoTestOptions {\n  goVersion?: string;\n  goVersionFile?: string;\n  workingDirectory?: string;\n  testFlags?: string;\n  preTest?: string;\n  env?: Record<string, string>;\n}\n\nexport const runGoTests = async (options: GoTestOptions) => {\n  const workingDirectory = options.workingDirectory ?? process.cwd();\n  let resolvedVersion = options.goVersion;\n  if (!resolvedVersion && options.goVersionFile) {\n    resolvedVersion = readVersionFromFile(path.resolve(options.goVersionFile));\n  }\n\n  if (resolvedVersion) {\n    await installGo(resolvedVersion);\n  }\n\n  if (options.preTest) {\n    await runCommand({\n      command: 'bash',\n      args: ['-lc', options.preTest],\n      cwd: workingDirectory\n    });\n  }\n\n  const flags = options.testFlags ? stringArgv(options.testFlags) : ['./...'];\n  await runCommand({\n    command: 'go',\n    args: ['test', ...flags],\n    cwd: workingDirectory,\n    env: { ...process.env, ...options.env }\n  });\n};\n","import { Command } from 'commander';\nimport { runGoTests } from '../lib/go';\nimport { logger } from '../lib/logger';\n\ninterface GoTestsOptions {\n  goVersion?: string;\n  goVersionFile?: string;\n  workingDirectory?: string;\n  testFlags?: string;\n  preTest?: string;\n  env?: Record<string, string>;\n}\n\nconst collectKeyValuePairs = (value: string, accumulator: Record<string, string> = {}) => {\n  const [key, ...rest] = value.split('=');\n  if (!key) {\n    throw new Error(`Invalid env pair: ${value}`);\n  }\n  return { ...accumulator, [key]: rest.join('=') };\n};\n\nexport const registerGoTestsCommand = (program: Command) => {\n  program\n    .command('go-tests')\n    .description('Execute Go tests with optional on-the-fly Go installation.')\n    .option('--go-version <version>', 'Explicit Go version to install (e.g. 1.22.5)')\n    .option('--go-version-file <path>', 'File that declares a Go version (defaults to go.mod)')\n    .option('--working-directory <path>', 'Working directory for go test', '.')\n    .option('--test-flags <flags>', 'Flags forwarded to go test (default: ./...)')\n    .option('--pre-test <script>', 'Shell snippet executed before go test')\n    .option('--env <key=value>', 'Environment variable forwarded to go test', collectKeyValuePairs, {})\n    .action(async (opts: GoTestsOptions) => {\n      await runGoTests({\n        goVersion: opts.goVersion,\n        goVersionFile: opts.goVersionFile,\n        workingDirectory: opts.workingDirectory,\n        testFlags: opts.testFlags,\n        preTest: opts.preTest,\n        env: opts.env\n      });\n      logger.info('Go tests completed');\n    });\n};\n","import { Command } from 'commander';\nimport fs from 'node:fs';\nimport os from 'node:os';\nimport path from 'node:path';\nimport { CodexClient } from '../lib/codex';\nimport { loadActionContext, parseRepo } from '../lib/context';\nimport { createOrUpdateRelease, listRecentCommits } from '../lib/github';\nimport { runGoTests } from '../lib/go';\nimport { logger } from '../lib/logger';\nimport { renderTemplateFile } from '../lib/templates';\n\ninterface ReleaseOptions {\n  tagName: string;\n  releaseTitle?: string;\n  target?: string;\n  draft?: boolean;\n  skipTests?: boolean;\n  goVersion?: string;\n  goVersionFile?: string;\n  testFlags?: string;\n  preTest?: string;\n  prompt: string;\n  model?: string;\n  effort?: string;\n  codexArgs?: string;\n  codexBin?: string;\n  notesExtra?: string;\n  commitLimit?: number;\n  dryRun?: boolean;\n  enableNetwork?: boolean;\n  enableWebSearch?: boolean;\n  projectName?: string;\n  projectLanguage?: string;\n  packageName?: string;\n  projectPurpose?: string;\n  repositoryUrl?: string;\n  repo?: string;\n}\n\nconst RELEASE_SCHEMA = 'prompts/codex-release-schema.json';\n\nconst buildNotesInput = (commits: unknown[], extra?: string) => {\n  const commitLines = commits\n    .map((commit: any) => `- ${commit.sha?.slice(0, 7)} ${commit.commit?.message?.split('\\n')[0] ?? ''}`)\n    .join('\\n');\n\n  const extraBlock = extra ? `\\n\\n### Extra Context\\n${extra}` : '';\n  return `## Commits\\n${commitLines}${extraBlock}`;\n};\n\nexport const registerReleaseCommand = (program: Command) => {\n  program\n    .command('release')\n    .description('Generate release notes with Codex and publish a GitHub release')\n    .requiredOption('--tag-name <tag>', 'Tag to publish (e.g. v1.2.3)')\n    .option('--release-title <title>', 'Release display name (defaults to tag)')\n    .option('--target <ref>', 'Target ref/commit for the release', 'main')\n    .option('--draft', 'Create the release as a draft', false)\n    .option('--skip-tests', 'Skip Go test execution', false)\n    .option('--go-version <version>', 'Explicit Go version to install')\n    .option('--go-version-file <path>', 'File with Go version (default go.mod)')\n    .option('--test-flags <flags>', 'Flags forwarded to go test (default ./...)')\n    .option('--pre-test <script>', 'Shell snippet executed before go test')\n    .option('--prompt <path>', 'Prompt file path for release notes', 'prompts/codex-release-template.md')\n    .option('--model <name>', 'Codex model override')\n    .option('--effort <level>', 'Codex reasoning effort override')\n    .option('--codex-bin <path>', 'Override Codex binary path for the SDK', 'codex')\n    .option('--enable-network', 'Allow Codex outbound network access', false)\n    .option('--enable-web-search', 'Allow Codex to run web searches', false)\n    .option('--notes-extra <markdown>', 'Extra markdown context appended to Codex input')\n    .option('--project-name <text>', 'Project name referenced in the prompt', 'Codex Go SDK')\n    .option('--project-language <text>', 'Primary language referenced in the prompt', 'Go')\n    .option('--package-name <text>', 'Package/module identifier referenced in the prompt', 'github.com/activadee/godex')\n    .option('--project-purpose <text>', 'One-line description of the project purpose', 'Provides a wrapper around the Codex CLI.')\n    .option('--repository-url <text>', 'Repository URL or identifier referenced in the prompt', 'https://github.com/activadee/godex')\n    .option('--commit-limit <number>', 'Number of commits to include', (value) => Number.parseInt(value, 10), 50)\n    .option('--dry-run', 'Print notes without publishing release', false)\n    .option('--repo <owner/repo>', 'Override repository when running locally')\n    .action(async (opts: ReleaseOptions) => {\n      const repoOverride = opts.repo ? parseRepo(opts.repo) : undefined;\n      const ctx = loadActionContext({ repo: repoOverride });\n\n      if (!opts.skipTests) {\n        await runGoTests({\n          goVersion: opts.goVersion,\n          goVersionFile: opts.goVersionFile,\n          testFlags: opts.testFlags,\n          preTest: opts.preTest\n        });\n      } else {\n        logger.info('Skipping Go tests');\n      }\n\n      const commits = await listRecentCommits(ctx, { target: opts.target, limit: opts.commitLimit });\n      const input = buildNotesInput(commits, opts.notesExtra);\n      if (opts.codexArgs) {\n        logger.warn('codexArgs are not supported when using the Codex SDK and will be ignored.');\n      }\n      const codex = new CodexClient(opts.codexBin);\n      const templatePath = path.resolve(opts.prompt);\n      const { promptPath, cleanup } = renderReleasePrompt(templatePath, buildReleasePromptVariables(opts));\n      let notes: string;\n      try {\n        notes = await codex.run({\n          promptPath,\n          input,\n          model: opts.model,\n          effort: opts.effort,\n          outputSchemaPath: path.resolve(RELEASE_SCHEMA),\n          networkAccessEnabled: Boolean(opts.enableNetwork),\n          webSearchEnabled: Boolean(opts.enableWebSearch)\n        });\n      } finally {\n        cleanup();\n      }\n      const releaseBody = formatReleaseBody(notes);\n\n      if (opts.dryRun) {\n        logger.info('Generated release notes (dry-run):');\n        logger.info(releaseBody);\n        return;\n      }\n\n      const url = await createOrUpdateRelease(ctx, {\n        tag: opts.tagName,\n        target: opts.target,\n        releaseName: opts.releaseTitle,\n        body: releaseBody,\n        draft: opts.draft\n      });\n\n      logger.info(`Release ready at ${url}`);\n    });\n};\n\nconst formatReleaseBody = (raw: string) => {\n  try {\n    const parsed = JSON.parse(raw) as { overview?: string; highlights?: string[] };\n    const overview = parsed.overview?.trim() ?? 'No overview provided.';\n    const highlights = Array.isArray(parsed.highlights) && parsed.highlights.length\n      ? parsed.highlights.map((item) => `- ${item}`).join('\\n')\n      : '- Update details unavailable.';\n\n    return [`${overview}`, '', '## Highlights', highlights].join('\\n');\n  } catch (error) {\n    logger.warn('Failed to parse structured release notes; using raw output.', {\n      message: (error as Error).message\n    });\n    return raw;\n  }\n};\n\nconst buildReleasePromptVariables = (opts: ReleaseOptions): Record<string, string> => ({\n  '{{PROJECT_NAME}}': opts.projectName ?? 'Codex Go SDK',\n  '{{PROJECT_LANGUAGE}}': opts.projectLanguage ?? 'Go',\n  '{{PACKAGE_NAME}}': opts.packageName ?? 'github.com/activadee/godex',\n  '{{PROJECT_PURPOSE}}': opts.projectPurpose ?? 'Provides a wrapper around the Codex CLI.',\n  '{{REPOSITORY_URL}}': opts.repositoryUrl ?? 'https://github.com/activadee/godex'\n});\n\nconst renderReleasePrompt = (templatePath: string, variables: Record<string, string>) => {\n  const tempDir = fs.mkdtempSync(path.join(os.tmpdir(), 'codex-release-'));\n  const promptPath = path.join(tempDir, 'prompt.md');\n  renderTemplateFile({ templatePath, outputPath: promptPath, variables });\n  const cleanup = () => {\n    try {\n      fs.rmSync(tempDir, { recursive: true, force: true });\n    } catch {\n      // ignore cleanup errors\n    }\n  };\n  return { promptPath, cleanup };\n};\n","import { Command } from 'commander';\nimport path from 'node:path';\nimport { CodexClient } from '../lib/codex';\nimport { loadActionContext, parseRepo, readEventPayload } from '../lib/context';\nimport {\n  createReview,\n  fetchPullRequest,\n  listPullRequestFiles,\n  requirePullRequestNumber,\n  type PullRequestEventPayload\n} from '../lib/github';\nimport { logger } from '../lib/logger';\n\nconst REVIEW_SCHEMA = 'prompts/codex-review-schema.json';\n\ninterface ReviewOptions {\n  prompt: string;\n  promptExtra?: string;\n  model?: string;\n  effort?: string;\n  codexBin?: string;\n  dryRun?: boolean;\n  eventPath?: string;\n  pullNumber?: number;\n  enableNetwork?: boolean;\n  enableWebSearch?: boolean;\n  repo?: string;\n}\n\nconst buildCodexInput = async (\n  options: ReviewOptions,\n  event: PullRequestEventPayload,\n  ctx: ReturnType<typeof loadActionContext>\n) => {\n  const pullNumber = options.pullNumber ?? requirePullRequestNumber(event);\n  const pr = await fetchPullRequest(ctx, pullNumber);\n  const files = await listPullRequestFiles(ctx, pullNumber);\n\n  const fileSummaries = files\n    .map((file) => {\n      const header = `### ${file.filename} (${file.status}${file.changes ? `, Â±${file.changes}` : ''})`;\n      const patch = file.patch ? `\\n\\n\\`\\`\\`diff\\n${file.patch}\\n\\`\\`\\`` : '';\n      return `${header}${patch}`;\n    })\n    .join('\\n\\n');\n\n  const metadata = [\n    `Title: ${pr.title}`,\n    `Author: ${pr.user?.login ?? 'unknown'}`,\n    `Base: ${pr.base?.ref}`,\n    `Head: ${pr.head?.label}`,\n    `URL: ${pr.html_url}`,\n    pr.body ? `Body:\\n${pr.body}` : undefined\n  ]\n    .filter(Boolean)\n    .join('\\n\\n');\n\n  const guidance = options.promptExtra\n    ? `\\n\\n### Additional Reviewer Guidance\\n${options.promptExtra}`\n    : '';\n\n  return `${metadata}${guidance}\\n\\n---\\n\\n${fileSummaries}`;\n};\n\nconst formatReviewResponse = (raw: string) => {\n  try {\n    const parsed = JSON.parse(raw) as {\n      summary?: string;\n      comments?: Array<{ path: string; line: number; body: string }>;\n    };\n    const summary = parsed.summary?.trim() || 'No issues detected.';\n    const comments = Array.isArray(parsed.comments) ? parsed.comments : [];\n    const findings = comments.length\n      ? comments\n        .map((comment) => `- \\`${comment.path}:${comment.line}\\`\\n  ${comment.body}`)\n        .join('\\n')\n      : '- âœ… No blocking findings.';\n\n    return [`## Summary`, summary, '', '## Findings', findings].join('\\n');\n  } catch (error) {\n    logger.warn('Failed to parse structured review output; returning raw text.', {\n      message: (error as Error).message\n    });\n    return raw;\n  }\n};\n\nexport const registerReviewCommand = (program: Command) => {\n  program\n    .command('review')\n    .description('Run the Codex PR review workflow')\n    .option('--prompt <path>', 'Prompt file to use', 'prompts/codex-review.md')\n    .option('--prompt-extra <markdown>', 'Additional markdown appended to the prompt')\n    .option('--model <name>', 'Codex model override')\n    .option('--effort <level>', 'Codex reasoning effort override')\n    .option('--codex-bin <path>', 'Override Codex binary path for the SDK', 'codex')\n    .option('--enable-network', 'Allow Codex outbound network access', false)\n    .option('--enable-web-search', 'Allow Codex to run web searches', false)\n    .option('--dry-run', 'Only print the Codex output without submitting a review', false)\n    .option('--event-path <path>', 'Path to a GitHub event payload override')\n    .option('--pull-number <number>', 'Explicit pull request number override', (value) =>\n      Number.parseInt(value, 10)\n    )\n    .option('--repo <owner/repo>', 'Override repository when running locally')\n    .action(async (opts: ReviewOptions) => {\n      const repoOverride = opts.repo ? parseRepo(opts.repo) : undefined;\n      const ctx = loadActionContext({ eventPath: opts.eventPath, repo: repoOverride });\n      const event = readEventPayload<PullRequestEventPayload>(ctx.eventPath) ?? {};\n      const input = await buildCodexInput(opts, event, ctx);\n\n      const codex = new CodexClient(opts.codexBin);\n      const output = await codex.run({\n        promptPath: path.resolve(opts.prompt),\n        input,\n        model: opts.model,\n        effort: opts.effort,\n        outputSchemaPath: path.resolve(REVIEW_SCHEMA),\n        networkAccessEnabled: Boolean(opts.enableNetwork),\n        webSearchEnabled: Boolean(opts.enableWebSearch)\n      });\n      const body = formatReviewResponse(output);\n\n      if (opts.dryRun) {\n        logger.info('Codex output (dry-run):');\n        logger.info(output);\n        return;\n      }\n\n      const pullNumber = opts.pullNumber ?? requirePullRequestNumber(event);\n      await createReview(ctx, pullNumber, body);\n      logger.info(`Submitted review for PR #${pullNumber}`);\n    });\n};\n"],"mappings":"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","names":["core","import_node_path","import_node_fs","import_node_path","path","fs","error","path","os","fs","error","import_node_fs","import_node_path","fs","error","path","error","error","path","import_node_fs","import_node_path","import_node_fs","import_node_path","path","fs","error","import_node_fs","import_node_path","escapeRegex","fs","path","fs","path","core","import_node_fs","import_node_path","semver","path","fs","stringArgv","import_node_fs","import_node_os","import_node_path","path","error","fs","os","import_node_path","error","path","error"]}